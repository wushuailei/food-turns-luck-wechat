<!--订单页面-->
<view class="container">
    <!-- 状态筛选标签栏 -->
    <view class="status-tabs">
        <view class="tab-item {{currentStatus === item.value ? 'active' : ''}}" wx:for="{{statusTabs}}" wx:key="value" bindtap="onStatusChange" data-status="{{item.value}}">
            {{item.label}}
        </view>
    </view>

    <!-- 订单列表 -->
    <view class="order-list">
        <view class="order-card" wx:for="{{orderList}}" wx:key="id" bindtap="goToOrderDetail" data-id="{{item.id}}">
            <!-- 订单头部 -->
            <view class="order-header">
                <view class="order-no">订单号: {{item.order_no}}</view>
                <view class="order-status {{getStatusClass(item.status)}}">
                    {{getStatusText(item.status)}}
                </view>
            </view>

            <!-- 订单信息 -->
            <view class="order-info">
                <view class="info-row" wx:if="{{item.target_time}}">
                    <text class="label">目标时间:</text>
                    <text class="value">{{formatTime(item.target_time)}}</text>
                </view>
                <view class="info-row" wx:if="{{item.remark}}">
                    <text class="label">备注:</text>
                    <text class="value">{{item.remark}}</text>
                </view>
                <view class="info-row">
                    <text class="label">创建时间:</text>
                    <text class="value">{{formatTime(item.created_at)}}</text>
                </view>
            </view>

            <!-- 用户信息 -->
            <view class="order-user" wx:if="{{item.user_nickname}}">
                <image class="user-avatar" src="{{item.user_avatar_key || '/assets/images/default-avatar.png'}}" mode="aspectFill" />
                <text class="user-name">{{item.user_nickname}}</text>
            </view>
        </view>

        <!-- 空状态 -->
        <view class="empty-state" wx:if="{{!loading && orderList.length === 0}}">
            <t-empty description="暂无订单" />
        </view>

        <!-- 加载更多提示 -->
        <view class="load-more" wx:if="{{orderList.length > 0}}">
            <text wx:if="{{loading}}">加载中...</text>
            <text wx:elif="{{!hasMore}}">没有更多了</text>
        </view>
    </view>
</view>
